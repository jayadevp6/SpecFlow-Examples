version: 0.2


phases:
   install:
    commands:
      - sudo wget -q https://packages.microsoft.com/config/ubuntu/18.04/packages-microsoft-prod.deb
      - sudo dpkg -i packages-microsoft-prod.deb
      - sudo apt-get update; 
      - sudo add-apt-repository universe
      - sudo apt-get install -y apt-transport-https
      - sudo apt-get update
      - sudo apt-get install -y dotnet-sdk-5.0
      
      - sudo apt-get update; \
      - sudo apt-get install -y apt-transport-https && \
      - sudo apt-get update && \
      - sudo apt-get install -y aspnetcore-runtime-5.0
   build:
    commands:
      - echo Build started on `date`
      - dotnet build
      - docker test
